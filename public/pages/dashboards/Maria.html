<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <title>Maria</title>
  <link rel="icon" href="../../assets/logos/logo_vetorizada.svg" type="image/x-icon">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../../style/sidebar.css">
  <link rel="stylesheet" href="../../style/essencial.css">
  <link rel="stylesheet" href="../../style/tela_home.css">
  <link rel="stylesheet" href="../../style/filtros.css">
  <link rel="stylesheet" href="../../style/popup.css">
  <link rel="stylesheet" href="../../style/Maria.css">
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
</head>

<body onload="listarPermissoesReload()">
  <nav id="id_sidebar"></nav>

  <div class="page_content">

    <div class="cards">

      <div class="card">
        <span class="label">INCIDENTES</span>
        <span class="value">34</span>
      </div>

      <div class="card">
        <span class="label">TRÁFEGO ATUAL</span>
        <span class="value">1.2 Tbit/s</span>
      </div>

      <div class="card capacity-card">
               <div id="gauge"></div>
      </div>

    </div>

    <div class="graficos">
     <div id="correlationHeatmap" style="width: 60vw; height: 60vh;"></div>


    </div>



  </div>


  <div class="dashButtons">
    <a href="./home.html"><img src="/public/Images/home.svg" alt=""></a>
    <a href="./Ally.html"><img src="/public/Images/Colaboradores/Colaborador1.svg" alt=""></a>
    <a href="./Gustavo.html"><img src="/public/Images/Colaboradores/Colaborador2.svg" alt=""></a>
    <a href="./Leonardo.html"><img src="/public/Images/Colaboradores/Colaborador3.svg" alt=""></a>
    <a href="./Maria.html"><img src="/public/Images/Colaboradores/Colaborador4.svg" alt=""></a>
    <a href="./Pedro.html"><img src="/public/Images/Colaboradores/Colaborador5.svg" alt=""></a>
  </div>
</body>

</html>
<script src="../../js/sidebar.js"></script>
<script src="../../js/popups.js"></script>
<script src="../../js/verificacaoPermissoes.js"></script>
<script>



  if (sessionStorage.empresaCnpj == undefined) {
    listarPermissoesReload();
    verificarPermissoesSideBar();
    setInterval(executarVerificacaoPermissoes, 30000);
  }

  function executarVerificacaoPermissoes() {
    if (sessionStorage.empresaCnpj == undefined) {
      listarPermissoesReload();
      verificarPermissoesSideBar();
    }
  }

  if (sessionStorage.empresaCnpj == undefined) {
    verificarPermissoesSideBar();
  }


</script>


<script>
  var options = {
    series: [70], // valor inicial
    colors: ["#1282a2"],
    chart: {
      height: 300,
      type: "radialBar",
      
    },
    plotOptions: {
      radialBar: {
        hollow: {
          size: "70%"
           
        },
        dataLabels: {
          name: {
            show: true,
            fontSize:"0.8rem",
            color: "rgb(0, 0, 0)",
            opacity: "0.7",
            fontFamily: "Montserrat",
            fontWeight: "300"

            
          },
          value: {
            show: true,
            fontSize: "1.1rem",
            color: "rgb(0, 0, 0)",
            fontWeight: "bold",
            formatter: (valor) => valor + "%"
          }
        }
      }
    },
    labels: ["CAPACIDADE"]
  };

  var gaugeChart = new ApexCharts(document.querySelector("#gauge"), options);
  gaugeChart.render();

</script>



<script>
const correlacao = [
  [1,     0.06,  -0.10,  0.05],   // trafego
  [0.06,  1,      0.17, -0.18],   // incidentes
  [-0.10, 0.17,   1,    -0.09],   // final_semana
  [0.05, -0.18,  -0.09,  1]       // feriado
];

const labels = ["trafego", "incidentes", "final_semana", "feriado"];

let data = [];
for (let i = 0; i < correlacao.length; i++) {
  for (let j = 0; j < correlacao[i].length; j++) {
    data.push([j, i, correlacao[i][j]]);
  }
}

var chartDom = document.getElementById('correlationHeatmap');
var myChart = echarts.init(chartDom);

var option = {
  title: {
    text: 'Correlação Entre as Variáveis',
    left: 'center'
  },

  tooltip: {
    position: 'top',
    formatter: (p) => {
      const value = p.data[2].toFixed(3);
      return `${labels[p.data[1]]} × ${labels[p.data[0]]}: <b>${value}</b>`;
    }
  },

  grid: {
    height: '60%',
    top: '15%'
  },

  xAxis: {
    type: 'category',
    data: labels,
    axisLabel: { rotate: 45 }
  },

  yAxis: {
    type: 'category',
    data: labels
  },

  visualMap: {
    min: -1,
    max: 1,
    calculable: true,
    orient: 'vertical',
    left: 'right',
    top: 'middle',
    inRange: {
      color: ['#ea7317', '#ebf2fa', '#3a7ca5'] // -1 vermelho, 0 branco, 1 azul
    }
  },

  series: [{
    name: 'Correlação',
    type: 'heatmap',
    data: data,
    label: {
      show: true,
      formatter: d => d.data[2].toFixed(2),
      color: '#000',
      fontSize: 12
    },

    emphasis: {
      itemStyle: {
        borderColor: '#000',
        borderWidth: 1
      }
    }
  }]
};

myChart.setOption(option);
</script>


